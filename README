This program is intended to evaluate log files as generated by
lsof-watch run with the --sexpr-to option, which collects information
about open files of a given Unix process.

=== To use lsof-watch:

 # cd /opt/
 # mkdir chj
 # cd chj/
 # git clone https://github.com/pflanze/chj-perllib.git perllib
 # git clone https://github.com/pflanze/chj-bin.git bin
 $ PATH="$PATH":/opt/chj/bin
 $ export PERL5LIB=/opt/chj/perllib
 $ lsof-watch

this gives a help text.

 $ daemonize --bg lsof-watch 1234 --alarm-on 1000 --on-alarm cat \
     --sexpr-to logfile.gz -i 5

Change the '1234' to the pid of the process to be watched, adapt the
'1000' to something below the limit on the number of filehandles (see
"-n" in "help ulimit" in bash), and increase the '5' to something
bigger if this uses too much CPU or log space. Replace the 'cat' with
the name or path of a script that notifies you. Like

 #!/bin/bash

 {
 echo "To: your@domain.com"
 echo "From: your@domain.com"
 echo "Subject: lsof-watch alarm"
 echo
 cat
 } | sendmail -t


=== To use lsof-watch-parse, install the Gambit Scheme system, then:

 $ cd lsof-watch-parse
 $ gsc p
 $ gsi p -e '(path-print-time/numfilehandles/numIPconnections/topIP "path/to/logfile.gz")' > logextract.txt


Note: the possible message "gzip: stdout: Broken pipe" is harmless.
